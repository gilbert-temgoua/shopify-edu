<div class="banner-section" 
     data-section-id="{{ section.id }}" 
     data-section-type="banner-section"
     style="--text-color: {{ section.settings.text_color }};
            --cta-border-color: {{ section.settings.cta_border_color }};
            --cta-text-color: {{ section.settings.cta_text_color }};
            --box-color: {{ section.settings.box_color }};
            --box-opacity: {{ section.settings.box_opacity | divided_by: 100.0 }};
            --overlay-opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }}">

  <!-- Media -->
  <div class="banner-media">
    {% if section.settings.media_type == 'video' and section.settings.video_url != blank %}
      <div class="banner-media__video-wrapper">
        {% if section.settings.video_url contains 'youtube.com' or section.settings.video_url contains 'youtu.be' %}
          {% if section.settings.video_url contains 'v=' %}
            {% assign video_id = section.settings.video_url | split: 'v=' | last | split: '&' | first %}
          {% else %}
            {% assign video_id = section.settings.video_url | split: '/' | last %}
          {% endif %}
          <iframe class="banner-media__video"
                  src="https://www.youtube.com/embed/{{ video_id }}?autoplay=1&mute=1&loop=1&playlist={{ video_id }}&controls=0&showinfo=0&rel=0&modestbranding=1"
                  frameborder="0"
                  allow="autoplay; encrypted-media"
                  allowfullscreen>
          </iframe>
        {% elsif section.settings.video_url contains 'vimeo.com' %}
          {% assign video_id = section.settings.video_url | split: '/' | last %}
          <iframe class="banner-media__video"
                  src="https://player.vimeo.com/video/{{ video_id }}?autoplay=1&muted=1&loop=1&background=1"
                  frameborder="0"
                  allow="autoplay; fullscreen"
                  allowfullscreen>
          </iframe>
        {% endif %}
      </div>
    {% elsif section.settings.hero_image != blank %}
      <div class="banner-media__image-wrapper">
        <img src="{{ section.settings.hero_image | image_url: width: 1920 }}"
             alt="{{ section.settings.hero_image.alt | default: 'Hero Banner' }}"
             class="banner-media__image"
             width="1920" height="1080" loading="eager">
      </div>
    {% endif %}

    {% if section.settings.show_overlay %}
      <div class="banner-media__overlay"></div>
    {% endif %}
  </div>

  <!-- Content -->
  <div class="banner-content banner-content--{{ section.settings.content_alignment }}">
    {% if section.settings.show_content_box %}
      <div class="banner-box">
        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'text' %}
              {% if block.settings.text != blank %}
                <{{ block.settings.heading_tag }} 
                  class="banner-text banner-text--{{ block.settings.text_style }}"{% if section.settings.text_drop_shadow %} data-shadow="true"{% endif %}>
                  {{ block.settings.text }}
                </{{ block.settings.heading_tag }}>
              {% endif %}
            {% when 'cta' %}
              {% if block.settings.button_text != blank and block.settings.button_url != blank %}
                <a href="{{ block.settings.button_url }}" 
                   class="banner-btn banner-btn--{{ block.settings.button_style }}">
                   {{ block.settings.button_text }}
                </a>
              {% endif %}
          {% endcase %}
        {% endfor %}
      </div>
    {% else %}
      <div class="banner-inline">
        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'text' %}
              {% if block.settings.text != blank %}
                <{{ block.settings.heading_tag }} 
                  class="banner-text banner-text--{{ block.settings.text_style }}"{% if section.settings.text_drop_shadow %} data-shadow="true"{% endif %}>
                  {{ block.settings.text }}
                </{{ block.settings.heading_tag }}>
              {% endif %}
            {% when 'cta' %}
              {% if block.settings.button_text != blank and block.settings.button_url != blank %}
                <a href="{{ block.settings.button_url }}" 
                   class="banner-btn banner-btn--{{ block.settings.button_style }}">
                   {{ block.settings.button_text }}
                </a>
              {% endif %}
          {% endcase %}
        {% endfor %}
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Hero Banner",
  "settings": [
    {"type":"select","id":"media_type","label":"Media Type","options":[{"value":"image","label":"Image"},{"value":"video","label":"Video"}],"default":"image"},
    {"type":"image_picker","id":"hero_image","label":"Hero Image"},
    {"type":"url","id":"video_url","label":"Video URL"},
    {"type":"checkbox","id":"show_overlay","label":"Show dark overlay","default":false},
    {"type":"range","id":"overlay_opacity","label":"Overlay opacity","min":0,"max":100,"step":5,"unit":"%","default":50},
    {"type":"select","id":"content_alignment","label":"Content alignment","options":[{"value":"left","label":"Left"},{"value":"center","label":"Center"},{"value":"right","label":"Right"}],"default":"center"},
    {"type":"checkbox","id":"show_content_box","label":"Show content box","default":true},
    {"type":"select","id":"box_color","label":"Box color","options":[{"value":"#000000","label":"Black"},{"value":"#ffffff","label":"White"}],"default":"#000000"},
    {"type":"range","id":"box_opacity","label":"Box opacity","min":0,"max":100,"step":5,"unit":"%","default":80},
    {"type":"select","id":"text_color","label":"Text color","options":[{"value":"#0C0C0C","label":"Black"},{"value":"#ffffff","label":"White"}],"default":"#ffffff"},
    {"type":"checkbox","id":"text_drop_shadow","label":"Add drop shadow to text","default":false},
    {"type":"select","id":"cta_border_color","label":"CTA border color","options":[{"value":"#000000","label":"Black"},{"value":"#ffffff","label":"White"}],"default":"#ffffff"},
    {"type":"select","id":"cta_text_color","label":"CTA text color","options":[{"value":"#000000","label":"Black"},{"value":"#ffffff","label":"White"}],"default":"#ffffff"}
  ],
  "blocks": [
    {"type":"text","name":"Text Block","limit":3,"settings":[{"type":"text","id":"text","label":"Text","default":"Your text here"},{"type":"select","id":"heading_tag","label":"Heading tag","options":[{"value":"h1","label":"H1"},{"value":"h2","label":"H2"},{"value":"h3","label":"H3"},{"value":"p","label":"Paragraph"}],"default":"h2"},{"type":"select","id":"text_style","label":"Text style","options":[{"value":"large","label":"Large"},{"value":"medium","label":"Medium"},{"value":"small","label":"Small"}],"default":"large"}]},
    {"type":"cta","name":"Call to Action","limit":2,"settings":[{"type":"text","id":"button_text","label":"Button text","default":"Shop Now"},{"type":"url","id":"button_url","label":"Button URL"},{"type":"select","id":"button_style","label":"Button style","options":[{"value":"primary","label":"Primary"},{"value":"secondary","label":"Secondary"}],"default":"primary"}]}
  ],
  "presets":[{"name":"Hero Banner","blocks":[{"type":"text","settings":{"text":"FALL / WINTER 2021","heading_tag":"h3","text_style":"small"}},{"type":"text","settings":{"text":"Our new collection is an ode to purity, fluidity and nature.","heading_tag":"h2","text_style":"large"}},{"type":"cta","settings":{"button_text":"SHOP MEN","button_style":"primary"}},{"type":"cta","settings":{"button_text":"SHOP WOMEN","button_style":"primary"}}]}]
}
{% endschema %}

{% stylesheet %}
  .banner-section {
    position: relative;
    width: 100%;
    min-height: 85vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  .banner-media {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
    overflow: hidden;
  }

  .banner-media__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .banner-media__video-wrapper {
    position: absolute;
    inset: 0;
    overflow: hidden;
  }

  .banner-media__video {
    width: 100%;
    height: 100%;
    border: none;
    position: absolute;
    top: 0;
    left: 0;
    object-fit: cover;
  }

  .banner-media__overlay {
    position: absolute;
    inset: 0;
    background-color: rgba(0, 0, 0, var(--overlay-opacity));
    z-index: 2;
  }

  .banner-content {
    position: relative;
    z-index: 3;
    max-width: 1200px;
    width: 100%;
    padding: 2rem;
    display: flex;
    align-items: center;
    min-height: 65vh;
  }

  .banner-content--left { justify-content: flex-start; text-align: left; }
  .banner-content--center { justify-content: center; text-align: center; }
  .banner-content--right { justify-content: flex-end; text-align: right; }

  .banner-box {
    background-color: var(--box-color);
    opacity: var(--box-opacity);
    border-radius: 12px;
    padding: 3rem;
    max-width: 700px;
    width: 100%;
  }

  .banner-inline { max-width: 850px; }

  .banner-text {
    color: var(--text-color);
    margin-bottom: 1.2rem;
    line-height: 1.3;
  }

  .banner-text--large { font-size: 3rem; font-weight: 400; }
  .banner-text--medium { font-size: 2rem; font-weight: 400; }
  .banner-text--small { font-size: 1.3rem; text-transform: uppercase; letter-spacing: 0.12em; }

  .banner-text[data-shadow="true"] { text-shadow: 2px 2px 5px rgba(0,0,0,0.6); }

  .banner-btn {
    display: inline-block;
    padding: 1rem 2rem;
    border: 2px solid var(--cta-border-color);
    color: var(--cta-text-color);
    text-decoration: none;
    font-weight: 600;
    letter-spacing: 0.05em;
    border-radius: 7px;
    transition: all 0.3s ease;
    background: rgba(255,255,255,0.12);
    backdrop-filter: blur(2px);
    margin-right: 1rem;
  }

  .banner-btn:hover {
    background-color: var(--cta-border-color);
    color: var(--box-color);
    transform: translateY(-3px);
  }

  .banner-btn--secondary {
    border-width: 1px;
    padding: 0.85rem 1.5rem;
    font-size: 0.9rem;
  }

  @media (max-width: 768px) {
    .banner-section { min-height: 60vh; }
    .banner-text--large { font-size: 2.2rem; }
    .banner-text--medium { font-size: 1.6rem; }
    .banner-box { padding: 2rem; }
    .banner-btn { display: block; margin-bottom: 1rem; margin-right: 0; }
  }
{% endstylesheet %}